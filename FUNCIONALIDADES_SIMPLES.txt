========================================================================
FUNCIONALIDADES DEL SISTEMA ETL - DESCRIPCI√ìN CONCISA
========================================================================

FUNCIONALIDAD PRINCIPAL:
El sistema valida datos ANTES de insertarlos, evitando errores de duplicados
y garantizando que solo registros v√°lidos lleguen a la base de datos.

========================================================================
C√ìMO FUNCIONA EL ETL (etl_validacion_previa.sql)
========================================================================

1. INICIALIZACI√ìN:
   - Limpia logs anteriores y configura variables de conteo en cero.
   - Crea un ID √∫nico para rastrear esta ejecuci√≥n espec√≠fica.

2. TABLAS TEMPORALES:
   - Crea tablas espejo (temp_articulos_validar, temp_clientes_validar, temp_proveedores_validar).
   - Carga datos de prueba con errores intencionales para demostrar las validaciones.

3. VALIDACIONES (10 tipos):
   - Detecta duplicados dentro del mismo lote de datos.
   - Verifica conflictos con registros ya existentes en la base de datos.
   - Valida nombres vac√≠os, precios negativos, categor√≠as nulas, emails inv√°lidos.
   - Registra TODOS los errores encontrados sin detener la ejecuci√≥n.

4. REGISTRO DE ERRORES:
   - Guarda cada error en sys_errores_etl con descripci√≥n detallada.
   - Incluye tipo de error, tabla, campo problem√°tico y valor espec√≠fico.

5. INSERCI√ìN SELECTIVA:
   - Inserta SOLO registros que NO aparecen en la tabla de errores.
   - Usa exclusi√≥n por c√≥digo: WHERE codigo NOT IN (SELECT errores...).

6. EVITA DUPLICADOS:
   - Al validar primero, nunca intenta insertar c√≥digos que ya existen.
   - Elimina completamente el ERROR 1062 (Duplicate entry).

7. CONTEOS REALES:
   - Cuenta registros directamente desde las tablas finales.
   - Muestra cu√°ntos art√≠culos, clientes y proveedores se insertaron realmente.

8. REPORTES VISUALES:
   - Presenta resumen con conteos de insertados vs errores detectados.
   - Lista todos los errores encontrados para revisi√≥n y correcci√≥n.

========================================================================
C√ìMO FUNCIONA EL SCRIPT DE EJECUCI√ìN (ejecutar_etl_inteligente.sh)
========================================================================

1. VERIFICACI√ìN DE ARCHIVOS:
   - Confirma que existen los archivos SQL necesarios antes de ejecutar.

2. EJECUCI√ìN SECUENCIAL:
   - Ejecuta primero create_TiendaInsumosOficina.sql para crear la estructura.
   - Luego ejecuta etl_validacion_previa.sql para procesar los datos.

3. MANEJO DE ERRORES:
   - Detiene el proceso si alg√∫n paso falla y muestra el error espec√≠fico.

4. VERIFICACI√ìN AUTOM√ÅTICA:
   - Al final ejecuta consultas para mostrar cu√°ntos registros se insertaron.
   - Confirma que el proceso termin√≥ correctamente.

========================================================================
DATOS DE PRUEBA INCLUIDOS
========================================================================

ART√çCULOS: 7 registros ‚Üí 2 v√°lidos se insertan (ART001, ART002)
CLIENTES: 6 registros ‚Üí 2 v√°lidos se insertan (CLI001, CLI002)  
PROVEEDORES: 5 registros ‚Üí 2 v√°lidos se insertan (PROV001, PROV002)

ERRORES DETECTADOS: ~12 errores de diferentes tipos (duplicados, nulos, inv√°lidos)

========================================================================
RESULTADO FINAL
========================================================================

‚úÖ DATOS V√ÅLIDOS: Se insertan en las tablas principales
‚ùå DATOS CON ERRORES: Se registran in sys_errores_etl pero NO se insertan
üîç TRAZABILIDAD: Cada error queda documentado para correcci√≥n posterior

El sistema garantiza que la base de datos solo contenga datos v√°lidos
y proporciona un reporte completo de todo lo que necesita correcci√≥n.

========================================================================
